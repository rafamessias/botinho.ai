<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Widget Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .demo-section {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .demo-item {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
        }

        .demo-item h3 {
            margin-top: 0;
            color: #374151;
        }

        .survey-container {
            display: flex;
            justify-content: center;
            margin: 1rem 0;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 1rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.25rem;
        }

        .btn:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        /* Theme switcher */
        .theme-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .theme-toggle {
            background: #ffffff;
            border: 2px solid #e5e7eb;
            border-radius: 50px;
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .theme-toggle:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .theme-icon {
            font-size: 16px;
        }

        /* Dark theme styles */
        [data-theme="dark"] {
            background-color: #0f172a;
            color: #f1f5f9;
        }

        [data-theme="dark"] body {
            background-color: #0f172a;
            color: #f1f5f9;
        }

        [data-theme="dark"] .demo-container {
            background-color: #0f172a;
        }

        [data-theme="dark"] .demo-header h1 {
            color: #f1f5f9;
        }

        [data-theme="dark"] .demo-header p {
            color: #cbd5e1;
        }

        [data-theme="dark"] .demo-section {
            background: #1e293b;
            border: 1px solid #334155;
            color: #f1f5f9;
        }

        [data-theme="dark"] .demo-section h2 {
            color: #f1f5f9;
        }

        [data-theme="dark"] .demo-section p {
            color: #cbd5e1;
        }

        [data-theme="dark"] .demo-item {
            background: #1e293b;
            border: 1px solid #334155;
        }

        [data-theme="dark"] .demo-item h3 {
            color: #f1f5f9;
        }

        [data-theme="dark"] .demo-item p {
            color: #cbd5e1;
        }

        [data-theme="dark"] .code-block {
            background: #0f172a;
            border: 1px solid #334155;
            color: #f1f5f9;
        }

        [data-theme="dark"] .btn {
            background: #3b82f6;
            color: white;
        }

        [data-theme="dark"] .btn:hover {
            background: #2563eb;
        }

        [data-theme="dark"] .btn-secondary {
            background: #64748b;
            color: white;
        }

        [data-theme="dark"] .btn-secondary:hover {
            background: #475569;
        }

        [data-theme="dark"] .theme-toggle {
            background: #1e293b;
            border-color: #334155;
            color: #f1f5f9;
        }

        [data-theme="dark"] .theme-toggle:hover {
            border-color: #3b82f6;
        }

        [data-theme="dark"] .survey-container {
            background-color: transparent;
        }

        /* Light theme styles (explicit) */
        [data-theme="light"] {
            background-color: #f5f5f5;
            color: #1f2937;
        }

        [data-theme="light"] body {
            background-color: #f5f5f5;
            color: #1f2937;
        }

        [data-theme="light"] .demo-container {
            background-color: #f5f5f5;
        }

        [data-theme="light"] .demo-header h1 {
            color: #1f2937;
        }

        [data-theme="light"] .demo-header p {
            color: #6b7280;
        }

        [data-theme="light"] .demo-section {
            background: white;
            border: 1px solid #e5e7eb;
            color: #1f2937;
        }

        [data-theme="light"] .demo-section h2 {
            color: #1f2937;
        }

        [data-theme="light"] .demo-section p {
            color: #6b7280;
        }

        [data-theme="light"] .demo-item {
            background: white;
            border: 1px solid #e5e7eb;
        }

        [data-theme="light"] .demo-item h3 {
            color: #374151;
        }

        [data-theme="light"] .demo-item p {
            color: #6b7280;
        }

        [data-theme="light"] .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            color: #1f2937;
        }

        [data-theme="light"] .btn {
            background: #3b82f6;
            color: white;
        }

        [data-theme="light"] .btn:hover {
            background: #2563eb;
        }

        [data-theme="light"] .btn-secondary {
            background: #6b7280;
            color: white;
        }

        [data-theme="light"] .btn-secondary:hover {
            background: #4b5563;
        }

        [data-theme="light"] .theme-toggle {
            background: #ffffff;
            border-color: #e5e7eb;
            color: #1f2937;
        }

        [data-theme="light"] .theme-toggle:hover {
            border-color: #3b82f6;
        }
    </style>
</head>

<body>
    <!-- Theme Switcher -->
    <div class="theme-switcher">
        <button class="theme-toggle" onclick="toggleTheme()">
            <span class="theme-icon" id="theme-icon">🌙</span>
            <span id="theme-text">Dark</span>
        </button>
    </div>

    <div class="demo-container">
        <div class="demo-header">
            <h1>Survey Widget Demo</h1>
            <p>Vanilla JavaScript survey widget for third-party websites</p>
        </div>

        <div class="demo-section">
            <h2>Basic Usage</h2>
            <p>Here's how to use the survey widget in your website:</p>

            <div class="code-block">
                &lt;!-- Include the survey widget script --&gt;
                &lt;script src="survey-widget-vanilla.js"&gt;&lt;/script&gt;

                &lt;!-- Create a container for the survey --&gt;
                &lt;div id="survey-container"&gt;&lt;/div&gt;

                &lt;script&gt;
                // Initialize the survey widget
                const surveyWidget = window.initSurveyWidget({
                surveyData: {
                id: 'demo-survey',
                name: 'Customer Satisfaction Survey',
                description: 'Help us improve our service',
                status: 'published',
                questions: [
                {
                id: 'q1',
                title: 'How satisfied are you with our service?',
                description: 'Please rate your overall experience',
                format: 'STAR_RATING',
                required: true,
                order: 1,
                options: []
                },
                {
                id: 'q2',
                title: 'What is your preferred contact method?',
                format: 'SINGLE_CHOICE',
                required: true,
                order: 2,
                options: [
                { id: 'email', text: 'Email', order: 1, isOther: false },
                { id: 'phone', text: 'Phone', order: 2, isOther: false },
                { id: 'other', text: 'Other', order: 3, isOther: true }
                ]
                },
                {
                id: 'q3',
                title: 'What features would you like to see?',
                format: 'MULTIPLE_CHOICE',
                required: false,
                order: 3,
                options: [
                { id: 'feature1', text: 'Mobile App', order: 1, isOther: false },
                { id: 'feature2', text: 'Better UI', order: 2, isOther: false },
                { id: 'feature3', text: 'More Integrations', order: 3, isOther: false }
                ]
                },
                {
                id: 'q4',
                title: 'Any additional comments?',
                format: 'LONG_TEXT',
                required: false,
                order: 4,
                options: []
                }
                ],
                style: {
                backgroundColor: '#ffffff',
                textColor: '#1f2937',
                buttonBackgroundColor: '#3b82f6',
                buttonTextColor: '#ffffff',
                margin: '16px 0px',
                padding: '24px',
                border: '1px solid #e5e7eb',
                borderRadius: '8px',
                titleFontSize: '20px',
                bodyFontSize: '16px',
                fontFamily: 'Inter, sans-serif'
                }
                },
                onComplete: (responses) => {
                console.log('Survey completed!', responses);

                },
                onError: (error) => {
                console.error('Survey error:', error);
                alert('Survey error: ' + error);
                }
                });

                // Mount the survey to a container
                surveyWidget.mount('survey-container');
                &lt;/script&gt;
            </div>
        </div>

        <div class="demo-section">
            <h2>Live Demo</h2>
            <p>Here's the survey widget in action:</p>

            <div class="survey-container">
                <div id="survey-container"></div>
            </div>

            <div style="text-align: center; margin-top: 1rem;">
                <button class="btn" onclick="resetSurvey()">Reset Survey</button>
                <button class="btn btn-secondary" onclick="showResponses()">Show Responses</button>
            </div>
        </div>

        <div class="demo-section">
            <h2>Widget Versions Comparison</h2>
            <p>Compare the full-featured widget vs the ultra-lightweight minimal version:</p>

            <div class="demo-grid">
                <div class="demo-item">
                    <h3>Full Widget (41KB)</h3>
                    <p style="font-size: 12px; color: #666; margin: 5px 0;">Complete with animations, transitions, and
                        extensive styling</p>
                    <div id="full-widget-demo"></div>
                </div>

                <div class="demo-item">
                    <h3>Minimal Widget (~2KB)</h3>
                    <p style="font-size: 12px; color: #666; margin: 5px 0;">Ultra-lightweight with all question types
                        but minimal CSS</p>
                    <div id="minimal-widget-demo"></div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>Different Styles (Full Widget)</h2>
            <p>Customize the appearance with different styles:</p>

            <div class="demo-grid">
                <div class="demo-item">
                    <h3>Dark Theme</h3>
                    <div id="dark-survey"></div>
                </div>

                <div class="demo-item">
                    <h3>Minimal Theme</h3>
                    <div id="minimal-survey"></div>
                </div>

                <div class="demo-item">
                    <h3>Colorful Theme</h3>
                    <div id="colorful-survey"></div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>Data Attributes Usage</h2>
            <p>You can also initialize surveys using data attributes:</p>

            <div class="code-block">
                &lt;div data-survey-widget
                data-survey-id="my-survey"
                data-test-mode="true"&gt;
                &lt;/div&gt;
            </div>
        </div>
    </div>

    <script src="survey-widget-vanilla.js"></script>
    <script src="survey-widget-minimal.js"></script>
    <script>
        // Sample survey data
        const sampleSurveyData = {
            id: "demo_svy_prod_feedback_001",
            name: "Feedback do Produto — Opineeo Widget",
            description: "Ajude-nos a melhorar! Conte como foi sua experiência usando o widget do Opineeo.",
            typeId: "demo_type_product_feedback",
            status: "published",
            allowMultipleResponses: true,
            questions: [
                {
                    id: "q_yesno_recommend",
                    title: "Você recomendaria este produto para um colega?",
                    description: "Pense na sua experiência geral até agora.",
                    format: "YES_NO",
                    required: true,
                    order: 0,
                    yesLabel: "Sim, recomendaria",
                    noLabel: "Ainda não",
                    buttonLabel: "Continuar",
                    options: []
                },
                {
                    id: "q_star_overall",
                    title: "Avaliação geral",
                    description: "De 1 a 5 estrelas, como você avalia o produto?",
                    format: "STAR_RATING",
                    required: true,
                    order: 1,
                    yesLabel: "Yes",
                    noLabel: "No",
                    buttonLabel: "Continuar",
                    options: []
                },
                {
                    id: "q_longtext_whatliked",
                    title: "O que você mais gostou?",
                    description: "Conte detalhes que fizeram a diferença na sua experiência.",
                    format: "LONG_TEXT",
                    required: false,
                    order: 2,
                    yesLabel: "Yes",
                    noLabel: "No",
                    buttonLabel: "Continuar",
                    options: []
                },
                {
                    id: "q_statement_consent",
                    title: "Informativo",
                    description: "Ao enviar, você concorda em compartilhar suas respostas para que possamos melhorar o produto.",
                    format: "STATEMENT",
                    required: false,
                    order: 3,
                    yesLabel: "Yes",
                    noLabel: "No",
                    buttonLabel: "Continuar",
                    options: []
                },
                {
                    id: "q_single_primary_use",
                    title: "Qual é o seu principal caso de uso?",
                    description: "Escolha a opção que melhor descreve como você usa o produto.",
                    format: "SINGLE_CHOICE",
                    required: true,
                    order: 4,
                    yesLabel: "Yes",
                    noLabel: "No",
                    buttonLabel: "Continuar",
                    options: [
                        { id: "opt_use_collect_reviews", text: "Coletar avaliações rápidas (5 estrelas + comentário)", order: 0, isOther: false },
                        { id: "opt_use_nps", text: "Mensurar satisfação (NPS/CSAT)", order: 1, isOther: false },
                        { id: "opt_use_bug_feedback", text: "Receber feedback de bugs e melhorias", order: 2, isOther: false },
                        { id: "opt_use_other", text: "Outro", order: 3, isOther: true }
                    ]
                },
                {
                    id: "q_multi_improvements",
                    title: "Em quais áreas deveríamos melhorar?",
                    description: "Selecione todas as opções que se aplicam.",
                    format: "MULTIPLE_CHOICE",
                    required: false,
                    order: 5,
                    yesLabel: "Yes",
                    noLabel: "No",
                    buttonLabel: "Enviar",
                    options: [
                        { id: "opt_imp_speed", text: "Velocidade e desempenho", order: 0, isOther: false },
                        { id: "opt_imp_usability", text: "Usabilidade / UX", order: 1, isOther: false },
                        { id: "opt_imp_customization", text: "Opções de customização", order: 2, isOther: false },
                        { id: "opt_imp_integrations", text: "Integrações (ex.: CRM, Helpdesk)", order: 3, isOther: false },
                        { id: "opt_imp_other", text: "Outro", order: 4, isOther: true }
                    ]
                }
            ],
            style: {
                id: "demo_style_dark_card_001",
                backgroundColor: "transparent",
                textColor: "#ffffff",
                buttonBackgroundColor: "#222222",
                buttonTextColor: "#ffffff",
                margin: "16px 0px",
                padding: "16px",
                borderRadius: "6px",
                titleFontSize: "18px",
                bodyFontSize: "16px",
                fontFamily: "Inter",
                createdAt: "2025-09-13T00:00:00.000Z",
                updatedAt: "2025-09-13T00:00:00.000Z",
                surveyId: "demo_svy_prod_feedback_001",
                teamId: 7,
                border: "1px solid #222222"
            }
        };

        // Initialize main survey
        let mainSurvey, fullWidgetDemo, minimalWidgetDemo;

        function initMainSurvey() {
            console.log('Initializing main survey...');

            // Check if container exists
            const container = document.getElementById('survey-container');
            if (!container) {
                console.error('Container with id "survey-container" not found');
                return;
            }

            mainSurvey = window.initSurveyWidget({
                surveyData: {
                    ...sampleSurveyData,
                    style: {
                        backgroundColor: '#ffffff',
                        textColor: '#1f2937',
                        buttonBackgroundColor: '#3b82f6',
                        buttonTextColor: '#ffffff',
                        margin: '16px 0px',
                        padding: '24px',
                        border: '1px solid #e5e7eb',
                        borderRadius: '8px',
                        titleFontSize: '20px',
                        bodyFontSize: '16px',
                        fontFamily: 'Inter, sans-serif'
                    }
                },
                onComplete: (responses) => {
                    console.log('Survey completed!', responses);
                },
                onError: (error) => {
                    console.error('Survey error:', error);
                }
            });

            mainSurvey.mount('survey-container');
        }

        function initWidgetComparison() {
            console.log('Initializing widget comparison...');

            // Full widget demo
            const fullContainer = document.getElementById('full-widget-demo');
            if (fullContainer) {
                fullWidgetDemo = window.initSurveyWidget({
                    surveyData: {
                        ...sampleSurveyData,
                        questions: sampleSurveyData.questions.slice(0, 3), // Show first 3 questions
                        style: {
                            backgroundColor: '#ffffff',
                            textColor: '#1f2937',
                            buttonBackgroundColor: '#3b82f6',
                            buttonTextColor: '#ffffff',
                            margin: '16px 0px',
                            padding: '24px',
                            border: '1px solid #e5e7eb',
                            borderRadius: '8px',
                            titleFontSize: '18px',
                            bodyFontSize: '14px',
                            fontFamily: 'Inter, sans-serif'
                        }
                    },
                    onComplete: (responses) => console.log('Full widget completed:', responses),
                    onError: (error) => console.error('Full widget error:', error)
                });
                fullWidgetDemo.mount('full-widget-demo');
            }

            // Minimal widget demo
            const minimalContainer = document.getElementById('minimal-widget-demo');
            if (minimalContainer) {
                minimalWidgetDemo = window.initSurveyWidgetMinimal({
                    surveyData: {
                        ...sampleSurveyData,
                        questions: sampleSurveyData.questions,
                        style: {
                            backgroundColor: '#ffffff',
                            textColor: '#222222',
                            buttonBackgroundColor: '#3b82f6',
                            buttonTextColor: '#ffffff',
                            margin: '16px 0px',
                            padding: '20px',
                            border: '1px solid #e5e7eb',
                            borderRadius: '8px',
                            titleFontSize: '16px',
                            bodyFontSize: '14px',
                            fontFamily: 'Arial, sans-serif'
                        }
                    },
                    onComplete: (responses) => console.log('Minimal widget completed:', responses),
                    onError: (error) => console.error('Minimal widget error:', error)
                });
                minimalWidgetDemo.mount('minimal-widget-demo');
            }
        }

        // Initialize themed surveys
        let darkSurvey, minimalSurvey, colorfulSurvey;

        function initThemedSurveys() {
            console.log('Initializing themed surveys...');

            // Dark theme survey
            const darkContainer = document.getElementById('dark-survey');
            if (darkContainer) {
                darkSurvey = window.initSurveyWidget({
                    surveyData: {
                        ...sampleSurveyData,
                        questions: sampleSurveyData.questions.slice(0, 2),
                        style: {
                            backgroundColor: '#1f2937',
                            textColor: '#f9fafb',
                            buttonBackgroundColor: '#3b82f6',
                            buttonTextColor: '#ffffff',
                            margin: '16px 0px',
                            padding: '20px',
                            border: '1px solid #374151',
                            borderRadius: '8px',
                            titleFontSize: '18px',
                            bodyFontSize: '14px',
                            fontFamily: 'Inter, sans-serif'
                        }
                    },
                    onComplete: (responses) => console.log('Dark survey completed:', responses),
                    onError: (error) => console.error('Dark survey error:', error)
                });
                darkSurvey.mount('dark-survey');
            }

            // Minimal theme
            const minimalContainer = document.getElementById('minimal-survey');
            if (minimalContainer) {
                minimalSurvey = window.initSurveyWidget({
                    surveyData: {
                        ...sampleSurveyData,
                        questions: sampleSurveyData.questions.slice(0, 2),
                        style: {
                            backgroundColor: 'transparent',
                            textColor: '#374151',
                            buttonBackgroundColor: '#000000',
                            buttonTextColor: '#ffffff',
                            margin: '0px',
                            padding: '0px',
                            border: 'none',
                            borderRadius: '0px',
                            titleFontSize: '16px',
                            bodyFontSize: '14px',
                            fontFamily: 'Arial, sans-serif'
                        }
                    },
                    onComplete: (responses) => console.log('Minimal survey completed:', responses),
                    onError: (error) => console.error('Minimal survey error:', error)
                });
                minimalSurvey.mount('minimal-survey');
            }

            // Colorful theme
            const colorfulContainer = document.getElementById('colorful-survey');
            if (colorfulContainer) {
                colorfulSurvey = window.initSurveyWidget({
                    surveyData: {
                        ...sampleSurveyData,
                        questions: sampleSurveyData.questions,
                        style: {
                            backgroundColor: '#fef3c7',
                            textColor: '#92400e',
                            buttonBackgroundColor: '#f59e0b',
                            buttonTextColor: '#ffffff',
                            margin: '16px 0px',
                            padding: '24px',
                            border: '2px solid #f59e0b',
                            borderRadius: '12px',
                            titleFontSize: '20px',
                            bodyFontSize: '16px',
                            fontFamily: 'sans-serif'
                        }
                    },
                    onComplete: (responses) => console.log('Colorful survey completed:', responses),
                    onError: (error) => console.error('Colorful survey error:', error)
                });
                colorfulSurvey.mount('colorful-survey');
            }
        }

        // Utility functions
        function resetSurvey() {
            if (mainSurvey) {
                mainSurvey.currentQuestionIndex = 0;
                mainSurvey.responses = [];
                mainSurvey.otherText = {};
                mainSurvey.render();
            }
        }

        function showResponses() {
            if (mainSurvey) {
                const responses = mainSurvey.getResponses();
                console.log('Current responses:', responses);
            }
        }

        // Theme management
        function initTheme() {
            // Get saved theme or default to light
            const savedTheme = localStorage.getItem('survey-demo-theme') || 'light';
            setTheme(savedTheme);
        }

        function setTheme(theme) {
            // Apply theme to both html and body elements
            document.documentElement.setAttribute('data-theme', theme);
            document.body.setAttribute('data-theme', theme);

            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');

            if (theme === 'dark') {
                themeIcon.textContent = '☀️';
                themeText.textContent = 'Light';
            } else {
                themeIcon.textContent = '🌙';
                themeText.textContent = 'Dark';
            }

            // Save theme preference
            localStorage.setItem('survey-demo-theme', theme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function () {
            initTheme();
            initMainSurvey();
            initWidgetComparison();
            initThemedSurveys();
        });
    </script>
</body>

</html>